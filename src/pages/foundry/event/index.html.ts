// metadata
export const version = "0.8.26"
export const title = "Foundry Event"
export const description = "Foundry event"
export const cyfrinLink = "https://www.cyfrin.io/glossary/foundry-event-solidity-code-example"

export const keywords = [
    "foundry",
    "event",
]

export const codes = [
    {
        fileName: "EventTest.sol",
        code: "Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgMC44LjI2OwoKaW1wb3J0ICJmb3JnZS1zdGQvVGVzdC5zb2wiOwoKY29udHJhY3QgRXZlbnQgewogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIGV4dGVybmFsIHsKICAgICAgICBlbWl0IFRyYW5zZmVyKGZyb20sIHRvLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyTWFueSgKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgYWRkcmVzc1tdIGNhbGxkYXRhIHRvLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBhbW91bnRzCiAgICApIGV4dGVybmFsIHsKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCB0by5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBlbWl0IFRyYW5zZmVyKGZyb20sIHRvW2ldLCBhbW91bnRzW2ldKTsKICAgICAgICB9CiAgICB9Cn0KCmNvbnRyYWN0IEV2ZW50VGVzdCBpcyBUZXN0IHsKICAgIEV2ZW50IHB1YmxpYyBlOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgYW1vdW50KTsKCiAgICBmdW5jdGlvbiBzZXRVcCgpIHB1YmxpYyB7CiAgICAgICAgZSA9IG5ldyBFdmVudCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRlc3RFbWl0VHJhbnNmZXJFdmVudCgpIHB1YmxpYyB7CiAgICAgICAgLy8gZnVuY3Rpb24gZXhwZWN0RW1pdCgKICAgICAgICAvLyAgICAgYm9vbCBjaGVja1RvcGljMSwKICAgICAgICAvLyAgICAgYm9vbCBjaGVja1RvcGljMiwKICAgICAgICAvLyAgICAgYm9vbCBjaGVja1RvcGljMywKICAgICAgICAvLyAgICAgYm9vbCBjaGVja0RhdGEKICAgICAgICAvLyApIGV4dGVybmFsOwoKICAgICAgICAvLyAxLiBUZWxsIEZvdW5kcnkgd2hpY2ggZGF0YSB0byBjaGVjawogICAgICAgIC8vIENoZWNrIGluZGV4IDEsIGluZGV4IDIgYW5kIGRhdGEKICAgICAgICB2bS5leHBlY3RFbWl0KHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKTsKICAgICAgICAvLyAyLiBFbWl0IHRoZSBleHBlY3RlZCBldmVudAogICAgICAgIGVtaXQgVHJhbnNmZXIoYWRkcmVzcyh0aGlzKSwgYWRkcmVzcygxMjMpLCA0NTYpOwogICAgICAgIC8vIDMuIENhbGwgdGhlIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGVtaXQgdGhlIGV2ZW50CiAgICAgICAgZS50cmFuc2ZlcihhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKDEyMyksIDQ1Nik7CgogICAgICAgIC8vIENoZWNrIG9ubHkgaW5kZXggMQogICAgICAgIHZtLmV4cGVjdEVtaXQodHJ1ZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSk7CiAgICAgICAgZW1pdCBUcmFuc2ZlcihhZGRyZXNzKHRoaXMpLCBhZGRyZXNzKDEyMyksIDQ1Nik7CiAgICAgICAgLy8gTk9URTogaW5kZXggMiBhbmQgZGF0YSAoYW1vdW50KSBkb2Vzbid0IG1hdGNoCiAgICAgICAgLy8gICAgICAgYnV0IHRoZSB0ZXN0IHdpbGwgc3RpbGwgcGFzcwogICAgICAgIGUudHJhbnNmZXIoYWRkcmVzcyh0aGlzKSwgYWRkcmVzcygxMTEpLCAyMjIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRlc3RFbWl0TWFueVRyYW5zZmVyRXZlbnQoKSBwdWJsaWMgewogICAgICAgIGFkZHJlc3NbXSBtZW1vcnkgdG8gPSBuZXcgYWRkcmVzc1tdKDIpOwogICAgICAgIHRvWzBdID0gYWRkcmVzcygxMTEpOwogICAgICAgIHRvWzFdID0gYWRkcmVzcygyMjIpOwoKICAgICAgICB1aW50MjU2W10gbWVtb3J5IGFtb3VudHMgPSBuZXcgdWludDI1NltdKDIpOwogICAgICAgIGFtb3VudHNbMF0gPSAxOwogICAgICAgIGFtb3VudHNbMV0gPSAyOwoKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCB0by5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAvLyAxLiBUZWxsIEZvdW5kcnkgd2hpY2ggZGF0YSB0byBjaGVjawogICAgICAgICAgICB2bS5leHBlY3RFbWl0KHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgLy8gMi4gRW1pdCB0aGUgZXhwZWN0ZWQgZXZlbnQKICAgICAgICAgICAgZW1pdCBUcmFuc2ZlcihhZGRyZXNzKHRoaXMpLCB0b1tpXSwgYW1vdW50c1tpXSk7CiAgICAgICAgfQoKICAgICAgICAvLyAzLiBDYWxsIHRoZSBmdW5jdGlvbiB0aGF0IHNob3VsZCBlbWl0IHRoZSBldmVudAogICAgICAgIGUudHJhbnNmZXJNYW55KGFkZHJlc3ModGhpcyksIHRvLCBhbW91bnRzKTsKICAgIH0KfQo=",
    },
]

const html = `<pre><code class="language-solidity"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
<span class="hljs-meta"><span class="hljs-keyword">pragma</span> <span class="hljs-keyword">solidity</span> 0.8.26;</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">"forge-std/Test.sol"</span>;

<span class="hljs-class"><span class="hljs-keyword">contract</span> <span class="hljs-title">Event</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">event</span> <span class="hljs-title">Transfer</span>(<span class="hljs-params"><span class="hljs-keyword">address</span> <span class="hljs-keyword">indexed</span> <span class="hljs-keyword">from</span>, <span class="hljs-keyword">address</span> <span class="hljs-keyword">indexed</span> to, <span class="hljs-keyword">uint256</span> amount</span>)</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transfer</span>(<span class="hljs-params"><span class="hljs-keyword">address</span> <span class="hljs-keyword">from</span>, <span class="hljs-keyword">address</span> to, <span class="hljs-keyword">uint256</span> amount</span>) <span class="hljs-title"><span class="hljs-keyword">external</span></span> </span>{
        <span class="hljs-keyword">emit</span> Transfer(<span class="hljs-keyword">from</span>, to, amount);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transferMany</span>(<span class="hljs-params">
        <span class="hljs-keyword">address</span> <span class="hljs-keyword">from</span>,
        <span class="hljs-keyword">address</span>[] <span class="hljs-keyword">calldata</span> to,
        <span class="hljs-keyword">uint256</span>[] <span class="hljs-keyword">calldata</span> amounts
    </span>) <span class="hljs-title"><span class="hljs-keyword">external</span></span> </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint256</span> i <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i <span class="hljs-operator">&lt;</span> to.<span class="hljs-built_in">length</span>; i<span class="hljs-operator">+</span><span class="hljs-operator">+</span>) {
            <span class="hljs-keyword">emit</span> Transfer(<span class="hljs-keyword">from</span>, to[i], amounts[i]);
        }
    }
}

<span class="hljs-class"><span class="hljs-keyword">contract</span> <span class="hljs-title">EventTest</span> <span class="hljs-keyword">is</span> <span class="hljs-title">Test</span> </span>{
    Event <span class="hljs-keyword">public</span> e;

    <span class="hljs-function"><span class="hljs-keyword">event</span> <span class="hljs-title">Transfer</span>(<span class="hljs-params"><span class="hljs-keyword">address</span> <span class="hljs-keyword">indexed</span> <span class="hljs-keyword">from</span>, <span class="hljs-keyword">address</span> <span class="hljs-keyword">indexed</span> to, <span class="hljs-keyword">uint256</span> amount</span>)</span>;

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setUp</span>(<span class="hljs-params"></span>) <span class="hljs-title"><span class="hljs-keyword">public</span></span> </span>{
        e <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> Event();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testEmitTransferEvent</span>(<span class="hljs-params"></span>) <span class="hljs-title"><span class="hljs-keyword">public</span></span> </span>{
        <span class="hljs-comment">// function expectEmit(</span>
        <span class="hljs-comment">//     bool checkTopic1,</span>
        <span class="hljs-comment">//     bool checkTopic2,</span>
        <span class="hljs-comment">//     bool checkTopic3,</span>
        <span class="hljs-comment">//     bool checkData</span>
        <span class="hljs-comment">// ) external;</span>

        <span class="hljs-comment">// 1. Tell Foundry which data to check</span>
        <span class="hljs-comment">// Check index 1, index 2 and data</span>
        vm.expectEmit(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-comment">// 2. Emit the expected event</span>
        <span class="hljs-keyword">emit</span> Transfer(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), <span class="hljs-keyword">address</span>(<span class="hljs-number">123</span>), <span class="hljs-number">456</span>);
        <span class="hljs-comment">// 3. Call the function that should emit the event</span>
        e.<span class="hljs-built_in">transfer</span>(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), <span class="hljs-keyword">address</span>(<span class="hljs-number">123</span>), <span class="hljs-number">456</span>);

        <span class="hljs-comment">// Check only index 1</span>
        vm.expectEmit(<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
        <span class="hljs-keyword">emit</span> Transfer(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), <span class="hljs-keyword">address</span>(<span class="hljs-number">123</span>), <span class="hljs-number">456</span>);
        <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> index 2 and data (amount) doesn&#x27;t match</span>
        <span class="hljs-comment">//       but the test will still pass</span>
        e.<span class="hljs-built_in">transfer</span>(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), <span class="hljs-keyword">address</span>(<span class="hljs-number">111</span>), <span class="hljs-number">222</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testEmitManyTransferEvent</span>(<span class="hljs-params"></span>) <span class="hljs-title"><span class="hljs-keyword">public</span></span> </span>{
        <span class="hljs-keyword">address</span>[] <span class="hljs-keyword">memory</span> to <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">address</span>[](<span class="hljs-number">2</span>);
        to[<span class="hljs-number">0</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">address</span>(<span class="hljs-number">111</span>);
        to[<span class="hljs-number">1</span>] <span class="hljs-operator">=</span> <span class="hljs-keyword">address</span>(<span class="hljs-number">222</span>);

        <span class="hljs-keyword">uint256</span>[] <span class="hljs-keyword">memory</span> amounts <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">uint256</span>[](<span class="hljs-number">2</span>);
        amounts[<span class="hljs-number">0</span>] <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        amounts[<span class="hljs-number">1</span>] <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint256</span> i <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i <span class="hljs-operator">&lt;</span> to.<span class="hljs-built_in">length</span>; i<span class="hljs-operator">+</span><span class="hljs-operator">+</span>) {
            <span class="hljs-comment">// 1. Tell Foundry which data to check</span>
            vm.expectEmit(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
            <span class="hljs-comment">// 2. Emit the expected event</span>
            <span class="hljs-keyword">emit</span> Transfer(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), to[i], amounts[i]);
        }

        <span class="hljs-comment">// 3. Call the function that should emit the event</span>
        e.transferMany(<span class="hljs-keyword">address</span>(<span class="hljs-built_in">this</span>), to, amounts);
    }
}
</code></pre>`

export default html
